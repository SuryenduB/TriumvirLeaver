<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE Workflow PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<Workflow created="1468355703242" explicitTransitions="true" id="4028f68155e05c970155e0d1f1ca0015" modified="1470683036465" name="Triumvir_Standard_Leaver_Process">
  <Variable input="true" name="launcher"/>
  <Variable input="true" name="quickLinkIdentityId"/>
  <Variable input="true" name="request"/>
  <Variable name="identityName">
    <Script>
      <Source>import sailpoint.object.Identity;  Identity identity = context.getObjectById(Identity.class, quickLinkIdentityId); return identity.getName();</Source>
    </Script>
  </Variable>
  <Variable input="true" name="plan"/>
  <Description>Workflow to handle the leaves process</Description>
  <Step icon="Start" monitored="true" name="Start" posX="99" posY="72">
    <Transition to="Init"/>
  </Step>
  <Step icon="Task" monitored="true" name="Init" posX="195" posY="72">
    <Transition to="CreateSnapshot">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("create-snapshot");

    if ("yes".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
    <Transition to="DisableAccounts">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("create-snapshot");

    if ("no".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
  </Step>
  <Step action="rule:Identity_Snapshot" icon="Task" monitored="true" name="CreateSnapshot" posX="380" posY="68">
    <Transition to="DisableAccounts"/>
  </Step>
  <Step icon="Provision" monitored="true" name="ProvisioningAccounts" posX="585" posY="71">
    <Arg name="identityEmailTemplate"/>
    <Arg name="enableRetryRequest"/>
    <Arg name="securityOfficerElectronicSignature"/>
    <Arg name="fallbackApprover"/>
    <Arg name="endOnManualWorkItems"/>
    <Arg name="userEmailTemplate"/>
    <Arg name="policiesToCheck"/>
    <Arg name="project"/>
    <Arg name="workItemComments"/>
    <Arg name="identityRequestId"/>
    <Arg name="approvalSplitPoint"/>
    <Arg name="source"/>
    <Arg name="identityDisplayName"/>
    <Arg name="foregroundProvisioning" value="true"/>
    <Arg name="ownerElectronicSignature"/>
    <Arg name="batchRequestItemId"/>
    <Arg name="splitPlans"/>
    <Arg name="doRefresh" value="true"/>
    <Arg name="plan" value="ref:plan"/>
    <Arg name="flow"/>
    <Arg name="identityElectronicSignature"/>
    <Arg name="identityName" value="ref:identityName"/>
    <Arg name="approvalSet"/>
    <Arg name="violationReviewDecision"/>
    <Arg name="filterRejects"/>
    <Arg name="splitProjects"/>
    <Arg name="requesterEmailTemplate" value="Access Request Reminder"/>
    <Arg name="approvalEmailTemplate" value="LCM Manager Notification"/>
    <Arg name="ticketManagementApplication"/>
    <Arg name="securityOfficerName"/>
    <Arg name="approvingIdentities"/>
    <Arg name="managerEmailTemplate"/>
    <Arg name="ticketId"/>
    <Arg name="approvalScheme" value="none"/>
    <Arg name="allowRequestsWithViolations"/>
    <Arg name="workItemPriority" value="High"/>
    <Arg name="managerElectronicSignature"/>
    <Arg name="requireViolationReviewComments"/>
    <Arg name="splitApprovalSet"/>
    <Arg name="approvalMode"/>
    <Arg name="trace" value="true"/>
    <Arg name="endOnProvisioningForms"/>
    <Arg name="splitWorkItemComments"/>
    <Arg name="notificationScheme" value="requester"/>
    <Arg name="policyViolations"/>
    <Arg name="policyScheme" value="fail"/>
    <Arg name="setPreviousApprovalDecisions"/>
    <Arg name="optimisticProvisioning"/>
    <Arg name="securityOfficerEmailTemplate"/>
    <WorkflowRef>
      <Reference class="sailpoint.object.Workflow" id="4028f6815360fa48015360fcafc5003d" name="LCM Provisioning"/>
    </WorkflowRef>
    <Transition to="RemoveEntitlements"/>
  </Step>
  <Step icon="Catches" monitored="true" name="DisableAccounts" posX="302" posY="178">
    <Transition to="AccountsPlan">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("disable-accounts");

    if ("yes".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
    <Transition to="RemoveEntitlements">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("disable-accounts");

    if ("no".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
  </Step>
  <Step icon="Catches" monitored="true" name="RemoveEntitlements" posX="509" posY="174">
    <Transition to="EntitlementsPlan">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("delete-entitlement");

    if ("yes".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
    <Transition to="ManualWorkFlow">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("delete-entitlement");

    if ("no".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
  </Step>
  <Step icon="Provision" monitored="true" name="ProvisioningEntitlements" posX="805" posY="71">
    <Arg name="identityEmailTemplate"/>
    <Arg name="enableRetryRequest"/>
    <Arg name="securityOfficerElectronicSignature"/>
    <Arg name="fallbackApprover"/>
    <Arg name="endOnManualWorkItems"/>
    <Arg name="userEmailTemplate"/>
    <Arg name="policiesToCheck"/>
    <Arg name="project"/>
    <Arg name="workItemComments"/>
    <Arg name="identityRequestId"/>
    <Arg name="approvalSplitPoint"/>
    <Arg name="source"/>
    <Arg name="identityDisplayName"/>
    <Arg name="foregroundProvisioning" value="true"/>
    <Arg name="ownerElectronicSignature"/>
    <Arg name="batchRequestItemId"/>
    <Arg name="splitPlans"/>
    <Arg name="doRefresh" value="true"/>
    <Arg name="plan" value="ref:plan"/>
    <Arg name="flow"/>
    <Arg name="identityElectronicSignature"/>
    <Arg name="identityName" value="ref:identityName"/>
    <Arg name="approvalSet"/>
    <Arg name="violationReviewDecision"/>
    <Arg name="filterRejects"/>
    <Arg name="splitProjects"/>
    <Arg name="requesterEmailTemplate"/>
    <Arg name="approvalEmailTemplate" value="LCM Manager Notification"/>
    <Arg name="ticketManagementApplication"/>
    <Arg name="securityOfficerName"/>
    <Arg name="approvingIdentities"/>
    <Arg name="managerEmailTemplate"/>
    <Arg name="ticketId"/>
    <Arg name="approvalScheme" value="none"/>
    <Arg name="allowRequestsWithViolations"/>
    <Arg name="workItemPriority" value="High"/>
    <Arg name="managerElectronicSignature"/>
    <Arg name="requireViolationReviewComments"/>
    <Arg name="splitApprovalSet"/>
    <Arg name="approvalMode"/>
    <Arg name="trace" value="true"/>
    <Arg name="endOnProvisioningForms"/>
    <Arg name="splitWorkItemComments"/>
    <Arg name="notificationScheme" value="requester"/>
    <Arg name="policyViolations"/>
    <Arg name="policyScheme" value="fail"/>
    <Arg name="setPreviousApprovalDecisions"/>
    <Arg name="optimisticProvisioning"/>
    <Arg name="securityOfficerEmailTemplate"/>
    <WorkflowRef>
      <Reference class="sailpoint.object.Workflow" id="4028f6815360fa48015360fcafc5003d" name="LCM Provisioning"/>
    </WorkflowRef>
    <Transition to="ManualWorkFlow"/>
  </Step>
  <Step action="rule:8a81811b56292cfa0156292f6fde0019" icon="Default" monitored="true" name="ManualWorkFlow" posX="737" posY="170" resultVariable="plan">
    <Transition to="EmailPlan"/>
  </Step>
  <Step action="rule:Disable_accounts" icon="Default" monitored="true" name="AccountsPlan" posX="482" posY="71" resultVariable="plan">
    <Transition to="ProvisioningAccounts"/>
  </Step>
  <Step action="rule:Delete_Entitlements" icon="Default" monitored="true" name="EntitlementsPlan" posX="700" posY="70" resultVariable="plan">
    <Transition to="ProvisioningEntitlements"/>
  </Step>
  <Step action="rule:-- Select Rule --" icon="Default" monitored="true" name="EmailPlan" posX="875" posY="171" resultVariable="plan">
    <Transition to="ResetPassword">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("hide-email");

    if ("no".equals(choise))
        return true;</Source>
      </Script>
    </Transition>
    <Transition to="HideEmail"/>
  </Step>
  <Step action="rule:8a81811b562de6a30156324e15da00e7" icon="Undo" monitored="true" name="ResetPassword" posX="1022" posY="65">
    <Transition to="MoveOUPlan"/>
  </Step>
  <Step icon="Email" monitored="true" name="HideEmail" posX="1020" posY="170"/>
  <Step action="rule:Move_OU" icon="Default" monitored="true" name="MoveOUPlan" posX="1129" posY="65" resultVariable="plan">
    <Transition to="ProvMoveOU">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("move-ou");

    if ("yes".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
    <Transition to="DeleteAccountsPlan">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("move-ou");

    if ("no".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
  </Step>
  <Step icon="Default" monitored="true" name="ProvMoveOU" posX="1302" posY="57">
    <Arg name="identityEmailTemplate"/>
    <Arg name="enableRetryRequest"/>
    <Arg name="securityOfficerElectronicSignature"/>
    <Arg name="fallbackApprover"/>
    <Arg name="endOnManualWorkItems"/>
    <Arg name="userEmailTemplate"/>
    <Arg name="policiesToCheck"/>
    <Arg name="project"/>
    <Arg name="workItemComments"/>
    <Arg name="identityRequestId"/>
    <Arg name="approvalSplitPoint"/>
    <Arg name="source"/>
    <Arg name="identityDisplayName"/>
    <Arg name="foregroundProvisioning" value="true"/>
    <Arg name="ownerElectronicSignature"/>
    <Arg name="batchRequestItemId"/>
    <Arg name="splitPlans"/>
    <Arg name="doRefresh" value="true"/>
    <Arg name="plan" value="ref:plan"/>
    <Arg name="flow"/>
    <Arg name="identityElectronicSignature"/>
    <Arg name="identityName" value="ref:identityName"/>
    <Arg name="approvalSet"/>
    <Arg name="violationReviewDecision"/>
    <Arg name="filterRejects"/>
    <Arg name="splitProjects"/>
    <Arg name="requesterEmailTemplate" value="LCM Manager Notification"/>
    <Arg name="approvalEmailTemplate" value="Work Item Comment"/>
    <Arg name="ticketManagementApplication"/>
    <Arg name="securityOfficerName"/>
    <Arg name="approvingIdentities"/>
    <Arg name="managerEmailTemplate"/>
    <Arg name="ticketId"/>
    <Arg name="approvalScheme" value="manager"/>
    <Arg name="allowRequestsWithViolations"/>
    <Arg name="workItemPriority" value="High"/>
    <Arg name="managerElectronicSignature"/>
    <Arg name="requireViolationReviewComments"/>
    <Arg name="splitApprovalSet"/>
    <Arg name="approvalMode"/>
    <Arg name="trace" value="true"/>
    <Arg name="endOnProvisioningForms"/>
    <Arg name="splitWorkItemComments"/>
    <Arg name="notificationScheme" value="requester"/>
    <Arg name="policyViolations"/>
    <Arg name="policyScheme"/>
    <Arg name="setPreviousApprovalDecisions"/>
    <Arg name="optimisticProvisioning"/>
    <Arg name="securityOfficerEmailTemplate"/>
    <WorkflowRef>
      <Reference class="sailpoint.object.Workflow" id="4028f6815360fa48015360fcafc5003d" name="LCM Provisioning"/>
    </WorkflowRef>
  </Step>
  <Step action="rule:Delete_accounts" icon="Default" monitored="true" name="DeleteAccountsPlan" posX="1146" posY="183" resultVariable="plan">
    <Transition to="ProvisioningDeleteAccounts">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("delete-accounts");

    if ("yes".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
    <Transition to="AccountDeleteProvisioning">
      <Script>
        <Source>import sailpoint.object.Custom;

    Custom simpleChoise = context.getObjectByName(Custom.class, "Triumvir-standard-leaver");
    String choise = simpleChoise.get("delete-accounts");

    if ("no".equals(choise))
        return true;
</Source>
      </Script>
    </Transition>
  </Step>
  <Step icon="Default" monitored="true" name="ProvisioningDeleteAccounts" posX="1306" posY="181">
    <Arg name="identityEmailTemplate"/>
    <Arg name="enableRetryRequest"/>
    <Arg name="securityOfficerElectronicSignature"/>
    <Arg name="fallbackApprover"/>
    <Arg name="endOnManualWorkItems"/>
    <Arg name="userEmailTemplate"/>
    <Arg name="policiesToCheck"/>
    <Arg name="project"/>
    <Arg name="workItemComments"/>
    <Arg name="identityRequestId"/>
    <Arg name="approvalSplitPoint"/>
    <Arg name="source"/>
    <Arg name="identityDisplayName"/>
    <Arg name="foregroundProvisioning"/>
    <Arg name="ownerElectronicSignature"/>
    <Arg name="batchRequestItemId"/>
    <Arg name="splitPlans"/>
    <Arg name="doRefresh"/>
    <Arg name="plan" value="ref:plan"/>
    <Arg name="flow"/>
    <Arg name="identityElectronicSignature"/>
    <Arg name="identityName" value="ref:identityName"/>
    <Arg name="approvalSet"/>
    <Arg name="violationReviewDecision"/>
    <Arg name="filterRejects"/>
    <Arg name="splitProjects"/>
    <Arg name="requesterEmailTemplate"/>
    <Arg name="approvalEmailTemplate"/>
    <Arg name="ticketManagementApplication"/>
    <Arg name="securityOfficerName"/>
    <Arg name="approvingIdentities"/>
    <Arg name="managerEmailTemplate"/>
    <Arg name="ticketId"/>
    <Arg name="approvalScheme"/>
    <Arg name="allowRequestsWithViolations"/>
    <Arg name="workItemPriority"/>
    <Arg name="managerElectronicSignature"/>
    <Arg name="requireViolationReviewComments"/>
    <Arg name="splitApprovalSet"/>
    <Arg name="approvalMode"/>
    <Arg name="trace"/>
    <Arg name="endOnProvisioningForms"/>
    <Arg name="splitWorkItemComments"/>
    <Arg name="notificationScheme"/>
    <Arg name="policyViolations"/>
    <Arg name="policyScheme"/>
    <Arg name="setPreviousApprovalDecisions"/>
    <Arg name="optimisticProvisioning"/>
    <Arg name="securityOfficerEmailTemplate"/>
    <WorkflowRef>
      <Reference class="sailpoint.object.Workflow" id="4028f6815360fa48015360fcafc5003d" name="LCM Provisioning"/>
    </WorkflowRef>
  </Step>
</Workflow>
